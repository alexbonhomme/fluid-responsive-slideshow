(function(e,t){e.fn.wp_editor=function(t){if(!e(this).is("textarea"))console.warn("Element must be a textarea");if(typeof tinyMCEPreInit=="undefined"||typeof QTags=="undefined"||typeof ap_vars=="undefined")console.warn("js_wp_editor( $settings ); must be loaded");if(!e(this).is("textarea")||typeof tinyMCEPreInit=="undefined"||typeof QTags=="undefined"||typeof ap_vars=="undefined")return this;var n={mode:"html",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:false,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:false,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:false,remove:"none"}],strikethrough:{inline:"del",deep:true,split:true}},relative_urls:false,remove_script_host:false,convert_urls:false,browser_spellcheck:true,fix_list_elements:true,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:false,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:false,wpeditimage_html5_captions:false,plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=3.9,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=3.9,"+ap_vars.includes_url+"js/tinymce/skins/wordpress/wp-content.css?ver=3.9",selector:"#apid",resize:"vertical",menubar:false,wpautop:true,indent:false,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar3:"",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"apid"}},r=new RegExp("apid","g");if(tinyMCEPreInit.mceInit["apid"]){n.mceInit=tinyMCEPreInit.mceInit["apid"]}var t=e.extend(true,n,t);return this.each(function(){if(!e(this).is("textarea"))console.warn("Element must be a textarea");else{var n=e(this).attr("id");e.each(t.mceInit,function(i,s){if(e.type(s)=="string")t.mceInit[i]=s.replace(r,n)});t.mode=t.mode=="tmce"?"tmce":"html";tinyMCEPreInit.mceInit[n]=t.mceInit;e(this).addClass("wp-editor-area").show();var i=this;if(e(this).closest(".wp-editor-wrap").length){var s=e(this).closest(".wp-editor-wrap").parent();e(this).closest(".wp-editor-wrap").before(e(this).clone());e(this).closest(".wp-editor-wrap").remove();i=s.find('textarea[id="'+n+'"]')}var o=e('<div id="wp-'+n+'-wrap" class="wp-core-ui wp-editor-wrap '+t.mode+'-active" />'),u=e('<div id="wp-'+n+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),a=e('<div class="wp-editor-tabs" />'),f=e('<a id="'+n+'-html" class="wp-switch-editor switch-html" onclick="switchEditors.switchto(this);">Text</a>'),l=e('<a id="'+n+'-tmce" class="wp-switch-editor switch-tmce" onclick="switchEditors.switchto(this);">Visual</a>'),c=e('<div id="wp-'+n+'-media-buttons" class="wp-media-buttons" />'),h=e('<a href="#" id="insert-media-button" class="button insert-media add_media" data-editor="'+n+'" title="Add Media"><span class="wp-media-buttons-icon"></span> Add Media</a>'),p=e('<div id="wp-'+n+'-editor-container" class="wp-editor-container" />'),d=false;c.appendTo(u);f.appendTo(a);l.appendTo(a);a.appendTo(u);u.appendTo(o);p.appendTo(o);p.append(e(i).clone().addClass("wp-editor-area"));if(d!=false)e.each(d,function(){if(!e('link[href="'+this+'"]').length)e(i).before('<link rel="stylesheet" type="text/css" href="'+this+'">')});e(i).before('<link rel="stylesheet" id="editor-buttons-css" href="'+ap_vars.includes_url+'css/editor.css" type="text/css" media="all">');e(i).before(o);e(i).remove();new QTags(n);QTags._buttonsInit();switchEditors.go(n,t.mode);e(o).on("click",".insert-media",function(t){var n=e(t.currentTarget),r=n.data("editor"),i={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:true};t.preventDefault();n.blur();if(n.hasClass("gallery")){i.state="gallery";i.title=wp.media.view.l10n.createGalleryTitle}wp.media.editor.open(r,i)})}})}})(jQuery,window)